{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.filters = exports.filterFactory = exports.filterByArray = exports.filterByDate = exports.filterByNumber = exports.filterByText = undefined;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n/* eslint eqeqeq: 0 */\n\n/* eslint no-console: 0 */\n\n\nvar _const = require('./const');\n\nvar _comparison = require('./comparison');\n\nvar filterByText = exports.filterByText = function filterByText(_) {\n  return function (data, dataField, _ref, customFilterValue) {\n    var _ref$filterVal = _ref.filterVal,\n        userInput = _ref$filterVal === undefined ? '' : _ref$filterVal,\n        _ref$comparator = _ref.comparator,\n        comparator = _ref$comparator === undefined ? _comparison.LIKE : _ref$comparator,\n        caseSensitive = _ref.caseSensitive; // make sure filter value to be a string\n\n    var filterVal = userInput.toString();\n    return data.filter(function (row) {\n      var cell = _.get(row, dataField);\n\n      if (customFilterValue) {\n        cell = customFilterValue(cell, row);\n      }\n\n      var cellStr = _.isDefined(cell) ? cell.toString() : '';\n\n      if (comparator === _comparison.EQ) {\n        return cellStr === filterVal;\n      }\n\n      if (caseSensitive) {\n        return cellStr.includes(filterVal);\n      }\n\n      return cellStr.toLocaleUpperCase().indexOf(filterVal.toLocaleUpperCase()) !== -1;\n    });\n  };\n};\n\nvar filterByNumber = exports.filterByNumber = function filterByNumber(_) {\n  return function (data, dataField, _ref2, customFilterValue) {\n    var _ref2$filterVal = _ref2.filterVal,\n        comparator = _ref2$filterVal.comparator,\n        number = _ref2$filterVal.number;\n    return data.filter(function (row) {\n      if (number === '' || !comparator) return true;\n      var valid = true;\n\n      var cell = _.get(row, dataField);\n\n      if (customFilterValue) {\n        cell = customFilterValue(cell, row);\n      }\n\n      switch (comparator) {\n        case _comparison.EQ:\n          {\n            if (cell != number) {\n              valid = false;\n            }\n\n            break;\n          }\n\n        case _comparison.GT:\n          {\n            if (cell <= number) {\n              valid = false;\n            }\n\n            break;\n          }\n\n        case _comparison.GE:\n          {\n            if (cell < number) {\n              valid = false;\n            }\n\n            break;\n          }\n\n        case _comparison.LT:\n          {\n            if (cell >= number) {\n              valid = false;\n            }\n\n            break;\n          }\n\n        case _comparison.LE:\n          {\n            if (cell > number) {\n              valid = false;\n            }\n\n            break;\n          }\n\n        case _comparison.NE:\n          {\n            if (cell == number) {\n              valid = false;\n            }\n\n            break;\n          }\n\n        default:\n          {\n            console.error('Number comparator provided is not supported');\n            break;\n          }\n      }\n\n      return valid;\n    });\n  };\n};\n\nvar filterByDate = exports.filterByDate = function filterByDate(_) {\n  return function (data, dataField, _ref3, customFilterValue) {\n    var _ref3$filterVal = _ref3.filterVal,\n        comparator = _ref3$filterVal.comparator,\n        date = _ref3$filterVal.date;\n    if (!date || !comparator) return data;\n    var filterDate = date.getUTCDate();\n    var filterMonth = date.getUTCMonth();\n    var filterYear = date.getUTCFullYear();\n    return data.filter(function (row) {\n      var valid = true;\n\n      var cell = _.get(row, dataField);\n\n      if (customFilterValue) {\n        cell = customFilterValue(cell, row);\n      }\n\n      if ((typeof cell === 'undefined' ? 'undefined' : _typeof(cell)) !== 'object') {\n        cell = new Date(cell);\n      }\n\n      var targetDate = cell.getUTCDate();\n      var targetMonth = cell.getUTCMonth();\n      var targetYear = cell.getUTCFullYear();\n\n      switch (comparator) {\n        case _comparison.EQ:\n          {\n            if (filterDate !== targetDate || filterMonth !== targetMonth || filterYear !== targetYear) {\n              valid = false;\n            }\n\n            break;\n          }\n\n        case _comparison.GT:\n          {\n            if (cell <= date) {\n              valid = false;\n            }\n\n            break;\n          }\n\n        case _comparison.GE:\n          {\n            if (targetYear < filterYear) {\n              valid = false;\n            } else if (targetYear === filterYear && targetMonth < filterMonth) {\n              valid = false;\n            } else if (targetYear === filterYear && targetMonth === filterMonth && targetDate < filterDate) {\n              valid = false;\n            }\n\n            break;\n          }\n\n        case _comparison.LT:\n          {\n            if (cell >= date) {\n              valid = false;\n            }\n\n            break;\n          }\n\n        case _comparison.LE:\n          {\n            if (targetYear > filterYear) {\n              valid = false;\n            } else if (targetYear === filterYear && targetMonth > filterMonth) {\n              valid = false;\n            } else if (targetYear === filterYear && targetMonth === filterMonth && targetDate > filterDate) {\n              valid = false;\n            }\n\n            break;\n          }\n\n        case _comparison.NE:\n          {\n            if (filterDate === targetDate && filterMonth === targetMonth && filterYear === targetYear) {\n              valid = false;\n            }\n\n            break;\n          }\n\n        default:\n          {\n            console.error('Date comparator provided is not supported');\n            break;\n          }\n      }\n\n      return valid;\n    });\n  };\n};\n\nvar filterByArray = exports.filterByArray = function filterByArray(_) {\n  return function (data, dataField, _ref4) {\n    var filterVal = _ref4.filterVal,\n        comparator = _ref4.comparator;\n    if (filterVal.length === 0) return data;\n    var refinedFilterVal = filterVal.filter(function (x) {\n      return _.isDefined(x);\n    }).map(function (x) {\n      return x.toString();\n    });\n    return data.filter(function (row) {\n      var cell = _.get(row, dataField);\n\n      var cellStr = _.isDefined(cell) ? cell.toString() : '';\n\n      if (comparator === _comparison.EQ) {\n        return refinedFilterVal.indexOf(cellStr) !== -1;\n      }\n\n      cellStr = cellStr.toLocaleUpperCase();\n      return refinedFilterVal.some(function (item) {\n        return cellStr.indexOf(item.toLocaleUpperCase()) !== -1;\n      });\n    });\n  };\n};\n\nvar filterFactory = exports.filterFactory = function filterFactory(_) {\n  return function (filterType) {\n    var filterFn = void 0;\n\n    switch (filterType) {\n      case _const.FILTER_TYPE.TEXT:\n      case _const.FILTER_TYPE.SELECT:\n        filterFn = filterByText(_);\n        break;\n\n      case _const.FILTER_TYPE.MULTISELECT:\n        filterFn = filterByArray(_);\n        break;\n\n      case _const.FILTER_TYPE.NUMBER:\n        filterFn = filterByNumber(_);\n        break;\n\n      case _const.FILTER_TYPE.DATE:\n        filterFn = filterByDate(_);\n        break;\n\n      default:\n        filterFn = filterByText(_);\n    }\n\n    return filterFn;\n  };\n};\n\nvar filters = exports.filters = function filters(data, columns, _) {\n  return function (currFilters) {\n    var clearFilters = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var factory = filterFactory(_);\n\n    var filterState = _extends({}, clearFilters, currFilters);\n\n    var result = data;\n    var filterFn = void 0;\n    Object.keys(filterState).forEach(function (dataField) {\n      var currentResult = void 0;\n      var filterValue = void 0;\n      var customFilter = void 0;\n\n      for (var i = 0; i < columns.length; i += 1) {\n        if (columns[i].dataField === dataField) {\n          filterValue = columns[i].filterValue;\n\n          if (columns[i].filter) {\n            customFilter = columns[i].filter.props.onFilter;\n          }\n\n          break;\n        }\n      }\n\n      if (clearFilters[dataField] && customFilter) {\n        currentResult = customFilter(clearFilters[dataField].filterVal, result);\n\n        if (typeof currentResult !== 'undefined') {\n          result = currentResult;\n        }\n      } else {\n        var filterObj = filterState[dataField];\n        filterFn = factory(filterObj.filterType);\n\n        if (customFilter) {\n          currentResult = customFilter(filterObj.filterVal, result);\n        }\n\n        if (typeof currentResult === 'undefined') {\n          result = filterFn(result, dataField, filterObj, filterValue);\n        } else {\n          result = currentResult;\n        }\n      }\n    });\n    return result;\n  };\n};","map":{"version":3,"sources":["/Users/mathena/Desktop/*/COVID-19/frontend/node_modules/react-bootstrap-table2-filter/lib/src/filter.js"],"names":["Object","defineProperty","exports","value","filters","filterFactory","filterByArray","filterByDate","filterByNumber","filterByText","undefined","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_typeof","Symbol","iterator","obj","constructor","_const","require","_comparison","_","data","dataField","_ref","customFilterValue","_ref$filterVal","filterVal","userInput","_ref$comparator","comparator","LIKE","caseSensitive","toString","filter","row","cell","get","cellStr","isDefined","EQ","includes","toLocaleUpperCase","indexOf","_ref2","_ref2$filterVal","number","valid","GT","GE","LT","LE","NE","console","error","_ref3","_ref3$filterVal","date","filterDate","getUTCDate","filterMonth","getUTCMonth","filterYear","getUTCFullYear","Date","targetDate","targetMonth","targetYear","_ref4","refinedFilterVal","x","map","some","item","filterType","filterFn","FILTER_TYPE","TEXT","SELECT","MULTISELECT","NUMBER","DATE","columns","currFilters","clearFilters","factory","filterState","result","keys","forEach","currentResult","filterValue","customFilter","props","onFilter","filterObj"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.filters = exports.filterFactory = exports.filterByArray = exports.filterByDate = exports.filterByNumber = exports.filterByText = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; /* eslint eqeqeq: 0 */\n/* eslint no-console: 0 */\n\n\nvar _const = require('./const');\n\nvar _comparison = require('./comparison');\n\nvar filterByText = exports.filterByText = function filterByText(_) {\n  return function (data, dataField, _ref, customFilterValue) {\n    var _ref$filterVal = _ref.filterVal,\n        userInput = _ref$filterVal === undefined ? '' : _ref$filterVal,\n        _ref$comparator = _ref.comparator,\n        comparator = _ref$comparator === undefined ? _comparison.LIKE : _ref$comparator,\n        caseSensitive = _ref.caseSensitive;\n\n    // make sure filter value to be a string\n    var filterVal = userInput.toString();\n\n    return data.filter(function (row) {\n      var cell = _.get(row, dataField);\n      if (customFilterValue) {\n        cell = customFilterValue(cell, row);\n      }\n      var cellStr = _.isDefined(cell) ? cell.toString() : '';\n      if (comparator === _comparison.EQ) {\n        return cellStr === filterVal;\n      }\n      if (caseSensitive) {\n        return cellStr.includes(filterVal);\n      }\n\n      return cellStr.toLocaleUpperCase().indexOf(filterVal.toLocaleUpperCase()) !== -1;\n    });\n  };\n};\n\nvar filterByNumber = exports.filterByNumber = function filterByNumber(_) {\n  return function (data, dataField, _ref2, customFilterValue) {\n    var _ref2$filterVal = _ref2.filterVal,\n        comparator = _ref2$filterVal.comparator,\n        number = _ref2$filterVal.number;\n    return data.filter(function (row) {\n      if (number === '' || !comparator) return true;\n      var valid = true;\n      var cell = _.get(row, dataField);\n      if (customFilterValue) {\n        cell = customFilterValue(cell, row);\n      }\n\n      switch (comparator) {\n        case _comparison.EQ:\n          {\n            if (cell != number) {\n              valid = false;\n            }\n            break;\n          }\n        case _comparison.GT:\n          {\n            if (cell <= number) {\n              valid = false;\n            }\n            break;\n          }\n        case _comparison.GE:\n          {\n            if (cell < number) {\n              valid = false;\n            }\n            break;\n          }\n        case _comparison.LT:\n          {\n            if (cell >= number) {\n              valid = false;\n            }\n            break;\n          }\n        case _comparison.LE:\n          {\n            if (cell > number) {\n              valid = false;\n            }\n            break;\n          }\n        case _comparison.NE:\n          {\n            if (cell == number) {\n              valid = false;\n            }\n            break;\n          }\n        default:\n          {\n            console.error('Number comparator provided is not supported');\n            break;\n          }\n      }\n      return valid;\n    });\n  };\n};\n\nvar filterByDate = exports.filterByDate = function filterByDate(_) {\n  return function (data, dataField, _ref3, customFilterValue) {\n    var _ref3$filterVal = _ref3.filterVal,\n        comparator = _ref3$filterVal.comparator,\n        date = _ref3$filterVal.date;\n\n    if (!date || !comparator) return data;\n    var filterDate = date.getUTCDate();\n    var filterMonth = date.getUTCMonth();\n    var filterYear = date.getUTCFullYear();\n\n    return data.filter(function (row) {\n      var valid = true;\n      var cell = _.get(row, dataField);\n\n      if (customFilterValue) {\n        cell = customFilterValue(cell, row);\n      }\n\n      if ((typeof cell === 'undefined' ? 'undefined' : _typeof(cell)) !== 'object') {\n        cell = new Date(cell);\n      }\n\n      var targetDate = cell.getUTCDate();\n      var targetMonth = cell.getUTCMonth();\n      var targetYear = cell.getUTCFullYear();\n\n      switch (comparator) {\n        case _comparison.EQ:\n          {\n            if (filterDate !== targetDate || filterMonth !== targetMonth || filterYear !== targetYear) {\n              valid = false;\n            }\n            break;\n          }\n        case _comparison.GT:\n          {\n            if (cell <= date) {\n              valid = false;\n            }\n            break;\n          }\n        case _comparison.GE:\n          {\n            if (targetYear < filterYear) {\n              valid = false;\n            } else if (targetYear === filterYear && targetMonth < filterMonth) {\n              valid = false;\n            } else if (targetYear === filterYear && targetMonth === filterMonth && targetDate < filterDate) {\n              valid = false;\n            }\n            break;\n          }\n        case _comparison.LT:\n          {\n            if (cell >= date) {\n              valid = false;\n            }\n            break;\n          }\n        case _comparison.LE:\n          {\n            if (targetYear > filterYear) {\n              valid = false;\n            } else if (targetYear === filterYear && targetMonth > filterMonth) {\n              valid = false;\n            } else if (targetYear === filterYear && targetMonth === filterMonth && targetDate > filterDate) {\n              valid = false;\n            }\n            break;\n          }\n        case _comparison.NE:\n          {\n            if (filterDate === targetDate && filterMonth === targetMonth && filterYear === targetYear) {\n              valid = false;\n            }\n            break;\n          }\n        default:\n          {\n            console.error('Date comparator provided is not supported');\n            break;\n          }\n      }\n      return valid;\n    });\n  };\n};\n\nvar filterByArray = exports.filterByArray = function filterByArray(_) {\n  return function (data, dataField, _ref4) {\n    var filterVal = _ref4.filterVal,\n        comparator = _ref4.comparator;\n\n    if (filterVal.length === 0) return data;\n    var refinedFilterVal = filterVal.filter(function (x) {\n      return _.isDefined(x);\n    }).map(function (x) {\n      return x.toString();\n    });\n    return data.filter(function (row) {\n      var cell = _.get(row, dataField);\n      var cellStr = _.isDefined(cell) ? cell.toString() : '';\n      if (comparator === _comparison.EQ) {\n        return refinedFilterVal.indexOf(cellStr) !== -1;\n      }\n      cellStr = cellStr.toLocaleUpperCase();\n      return refinedFilterVal.some(function (item) {\n        return cellStr.indexOf(item.toLocaleUpperCase()) !== -1;\n      });\n    });\n  };\n};\n\nvar filterFactory = exports.filterFactory = function filterFactory(_) {\n  return function (filterType) {\n    var filterFn = void 0;\n    switch (filterType) {\n      case _const.FILTER_TYPE.TEXT:\n      case _const.FILTER_TYPE.SELECT:\n        filterFn = filterByText(_);\n        break;\n      case _const.FILTER_TYPE.MULTISELECT:\n        filterFn = filterByArray(_);\n        break;\n      case _const.FILTER_TYPE.NUMBER:\n        filterFn = filterByNumber(_);\n        break;\n      case _const.FILTER_TYPE.DATE:\n        filterFn = filterByDate(_);\n        break;\n      default:\n        filterFn = filterByText(_);\n    }\n    return filterFn;\n  };\n};\n\nvar filters = exports.filters = function filters(data, columns, _) {\n  return function (currFilters) {\n    var clearFilters = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    var factory = filterFactory(_);\n    var filterState = _extends({}, clearFilters, currFilters);\n    var result = data;\n    var filterFn = void 0;\n    Object.keys(filterState).forEach(function (dataField) {\n      var currentResult = void 0;\n      var filterValue = void 0;\n      var customFilter = void 0;\n      for (var i = 0; i < columns.length; i += 1) {\n        if (columns[i].dataField === dataField) {\n          filterValue = columns[i].filterValue;\n          if (columns[i].filter) {\n            customFilter = columns[i].filter.props.onFilter;\n          }\n          break;\n        }\n      }\n\n      if (clearFilters[dataField] && customFilter) {\n        currentResult = customFilter(clearFilters[dataField].filterVal, result);\n        if (typeof currentResult !== 'undefined') {\n          result = currentResult;\n        }\n      } else {\n        var filterObj = filterState[dataField];\n        filterFn = factory(filterObj.filterType);\n        if (customFilter) {\n          currentResult = customFilter(filterObj.filterVal, result);\n        }\n        if (typeof currentResult === 'undefined') {\n          result = filterFn(result, dataField, filterObj, filterValue);\n        } else {\n          result = currentResult;\n        }\n      }\n    });\n    return result;\n  };\n};"]},"metadata":{},"sourceType":"script"}